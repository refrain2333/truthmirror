# AI分析模块功能需求文档

## 📋 模块概述

AI分析模块是"真相之镜"平台的核心组件，负责对用户提交的事件进行智能分析和评估。当事件达到10人关注阈值时，系统自动触发AI分析流程，通过多维度分析为用户提供客观、专业的事件真相评估。

## 🎯 核心目标

### 主要目标
- **客观分析**：基于事实和证据，提供中立的事件分析
- **多维评估**：从多个角度全面评估事件的真实性和可信度
- **智能摘要**：生成简洁明了的分析报告，便于用户理解
- **证据整理**：收集、分类和展示相关证据材料

### 业务价值
- 提高信息验证的效率和准确性
- 减少人工审核的工作量
- 为用户投票提供专业的参考依据
- 建立标准化的事件评估体系

## 🔄 触发条件与流程

### 触发条件
- **自动触发**：事件状态为"nominated"且关注人数达到10人
- **手动触发**：管理员手动启动AI分析（备用方案）
- **重新分析**：事件信息更新后需要重新评估

### 处理流程
1. **接收任务**：系统检测到触发条件，创建AI分析任务
2. **状态更新**：事件状态从"nominated"转为"processing"
3. **执行分析**：启动AI分析流程
4. **生成结果**：完成分析，生成评估报告
5. **状态转换**：事件状态从"processing"转为"voting"

## 🔍 需要完成的核心功能

### 1. 信息收集与预处理

#### 要做什么
- 提取事件的基础信息（标题、描述、关键词）
- 收集相关的网络信息和新闻报道
- 清理和标准化收集到的数据

#### 完成什么
- 获得事件的完整信息档案
- 建立事件相关的信息源数据库
- 形成结构化的分析素材

#### 最后给什么
- **事件信息档案**：包含标题、描述、关键词、时间等基础信息
- **信息源列表**：相关新闻、报道、官方声明等信息来源
- **预处理数据**：清理后的、可用于分析的结构化数据

### 2. 多维度真实性分析

#### 要做什么
- 分析信息源的可靠性和权威性
- 评估事件描述的逻辑一致性
- 检查事件的时间线和因果关系
- 识别可能的虚假信息特征

#### 完成什么
- 对每个信息源进行可信度评分
- 识别事件描述中的逻辑漏洞或矛盾
- 建立事件的时间线和关键节点
- 标记可疑或不一致的信息点

#### 最后给什么
- **信息源可信度评分**：每个来源的权威性和可靠性评级
- **逻辑一致性报告**：事件描述的内在逻辑分析
- **时间线分析**：事件发展的时间序列和关键节点
- **风险标记**：可能存在虚假信息的警示点

### 3. 观点分类与立场分析

#### 要做什么
- 识别不同信息源的观点和立场
- 将观点分类为支持、反对、中立等类别
- 分析各方观点的论据强度
- 评估观点的代表性和影响力

#### 完成什么
- 建立观点分类体系
- 量化各方观点的支持度
- 识别主流观点和边缘观点
- 评估观点的质量和说服力

#### 最后给什么
- **观点分类结果**：支持、反对、中立观点的详细分类
- **立场分布图**：各种观点的比例和分布情况
- **论据强度评估**：每种观点的证据支持程度
- **影响力分析**：不同观点的传播范围和影响力

### 4. 证据评估与验证

#### 要做什么
- 识别和提取关键证据材料
- 评估证据的真实性和有效性
- 检查证据之间的相互印证关系
- 识别缺失的关键证据

#### 完成什么
- 建立证据链条和逻辑关系
- 评估证据的质量和可信度
- 识别证据的薄弱环节
- 标记需要进一步验证的证据

#### 最后给什么
- **证据清单**：所有相关证据的详细列表
- **证据评级**：每项证据的可信度和重要性评分
- **证据关系图**：证据之间的逻辑关系和相互支撑
- **证据缺口分析**：缺失的关键证据和验证建议

### 5. 综合评估与评级

#### 要做什么
- 综合所有分析结果进行整体评估
- 基于多维度分析给出可信度评级
- 识别评估中的不确定性因素
- 提供评估的置信度指标

#### 完成什么
- 形成事件的整体可信度判断
- 建立标准化的评级体系
- 量化评估的可靠性
- 识别需要人工复核的情况

#### 最后给什么
- **可信度评级**：reliable（可靠）、questionable（存疑）、unreliable（不可靠）、insufficient（信息不足）
- **置信度分数**：AI评估结果的可靠性指标（0-100%）
- **不确定性分析**：影响评估准确性的关键因素
- **复核建议**：是否需要人工介入或额外验证

### 6. 分析报告生成

#### 要做什么
- 整合所有分析结果生成综合报告
- 用通俗易懂的语言解释分析过程
- 突出关键发现和重要结论
- 提供详细的分析依据和推理过程

#### 完成什么
- 生成结构化的分析报告
- 创建用户友好的摘要版本
- 建立分析过程的可追溯记录
- 形成标准化的报告格式

#### 最后给什么
- **AI分析摘要**：简洁明了的分析结论（200-500字）
- **详细分析报告**：完整的分析过程和依据
- **关键发现列表**：最重要的分析结果和证据
- **推理过程说明**：AI得出结论的逻辑路径

## 📊 输出数据规格

### 数据库存储要求

#### events表更新字段
- `ai_summary`：AI分析摘要（TEXT类型，500-1000字）
- `ai_rating`：AI评级（ENUM类型：reliable/questionable/unreliable/insufficient）
- `ai_confidence`：置信度分数（DECIMAL类型，0-100）
- `ai_analysis_time`：分析完成时间（TIMESTAMP类型）

#### information_sources表数据
- 每个事件至少5-10条相关信息源
- 每条信息源包含：标题、URL、来源、发布时间、可信度评分
- 信息源分类：官方声明、新闻报道、社交媒体、专家观点等

#### ai_analysis_details表（新增）
- 详细的分析过程记录
- 各维度的评估结果
- 证据链条和逻辑关系
- 不确定性因素说明

### API接口输出

#### 分析结果接口
```json
{
  "event_id": 123,
  "ai_rating": "reliable",
  "ai_confidence": 85.5,
  "ai_summary": "经过多维度分析...",
  "analysis_details": {
    "source_reliability": 8.5,
    "logical_consistency": 9.0,
    "evidence_strength": 7.8,
    "timeline_coherence": 8.2
  },
  "key_findings": [
    "官方证实了事件的核心事实",
    "多个独立来源相互印证",
    "时间线清晰且逻辑一致"
  ],
  "information_sources": [...],
  "analysis_timestamp": "2025-09-10T10:30:00Z"
}
```

## ⚡ 性能与质量要求

### 性能指标
- **处理时间**：单个事件分析时间不超过30秒
- **并发能力**：支持同时处理5个事件的分析任务
- **成功率**：分析成功率达到95%以上
- **响应时间**：API接口响应时间不超过3秒

### 质量标准
- **准确性**：AI评估与人工评估的一致性达到80%以上
- **完整性**：每个事件至少收集5条有效信息源
- **可解释性**：分析过程和结论具有清晰的逻辑链条
- **一致性**：相似事件的评估结果保持一致性

## 🔧 技术接口要求

### 输入接口
- 接收事件ID和基础信息
- 获取用户关注数据和兴趣表达
- 访问外部搜索API和信息源

### 输出接口
- 更新事件状态和AI分析结果
- 存储详细的分析数据
- 触发后续的投票流程
- 发送分析完成通知

### 错误处理
- 分析失败时的回滚机制
- 异常情况的日志记录
- 用户友好的错误提示
- 自动重试和人工介入机制

## 📈 扩展性考虑

### 未来功能扩展
- 支持多语言事件分析
- 集成图像和视频内容分析
- 实时事件跟踪和更新
- 用户反馈学习和模型优化

### 集成能力
- 支持多个AI模型的集成
- 兼容不同的搜索引擎API
- 可配置的分析参数和阈值
- 模块化的功能组件设计

---

**注意**：本文档定义了AI分析模块的功能需求和预期输出，具体的技术实现方案需要根据实际的AI服务提供商（如OpenAI、Claude等）的API能力进行设计和开发。
