# 真相之镜 (Truth Mirror)

基于AI分析和众包验证的事件真相验证平台。

## 项目概述

"真相之镜"通过整合SearXNG元搜索引擎、AI内容分析和用户投票机制，为网络事件提供客观、透明的真相验证服务。

## 核心功能

- **事件提交与管理**: 用户提交待验证事件，系统管理事件生命周期
- **智能搜索**: 通过SearXNG进行多源信息搜索
- **AI内容分析**: 自动分析信息源，生成客观摘要
- **众包投票**: 用户基于AI分析进行投票验证
- **真相确认**: 自动判定事件真相

## 技术栈

- **后端**: FastAPI + Python 3.8+
- **数据库**: MySQL + PyMySQL
- **前端**: 纯HTML + CSS + JavaScript
- **AI集成**: OpenAI/Claude API (模拟实现)

## 快速启动

### 访问地址
- **前端**: http://127.0.0.1:8080
- **后端API**: http://127.0.0.1:8000
- **API文档**: http://127.0.0.1:8000/docs

## 一键启动（推荐）

为了简化启动流程，提供了批处理文件：

### Windows用户
```bash
# 主启动器（推荐）
启动项目.bat

# 或单独启动
启动前端.bat  # 仅启动前端服务
启动后端.bat  # 仅启动后端服务
```

### 手动启动
如果批处理文件无法使用，可以手动启动：

## 手动启动步骤
### 前端启动
```bash
# 进入前端目录
cd frontend

# 启动前端服务 (端口8080)
python -m http.server 8080 --bind 127.0.0.1 --directory .
```

### 后端启动
```bash
# 进入后端目录
cd backend

# 启动后端服务 (端口8000)
python run.py
```

### 注意事项
- 确保MySQL数据库已启动并完成初始化
- 后端服务需要先启动，前端才能正常调用API
- 首次使用需要在前端注册用户账号
- 如果前端显示目录列表，请直接访问 http://127.0.0.1:8080/index.html
- 推荐使用批处理文件启动，避免路径和命令错误

## 开发需求记录

### 2025-09-10 启动流程优化
**需求**: 简化项目启动流程，解决用户启动困难问题
**问题**: 
- README中前端启动命令缺少 `--directory .` 参数导致显示目录列表
- 双层目录结构容易导致路径混乱
- 手动启动命令复杂，容易出错

**解决方案**:
- 创建一键启动批处理文件（启动项目.bat、启动前端.bat、启动后端.bat）
- 修正README中的启动命令
- 添加详细的启动说明和故障排除指南

**技术要点**:
- 批处理文件使用 `%~dp0` 获取脚本所在目录
- 添加文件存在性检查和错误提示
- 彩色界面提升用户体验

**注意事项**:
- 批处理文件路径相对于脚本位置，不受当前工作目录影响
- 前端服务需要 `--directory .` 参数才能正确处理index.html
- 建议用户使用批处理文件而非手动命令
